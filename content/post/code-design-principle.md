---
title: 代码设计原则
identifier: code-design-principle
author: Scott
date: 2022-01-21T12:04:31.174Z
tags:
  - 架构设计
categories:
  - 技术
---
在编程中有7个常见的代码设计原则。
<!--more-->


## 一、开闭原则（Open-Close Principle，OCP）
### 1.1 定义：
一个软件实体，如类、模块和函数应该对扩展开放，对修改关闭。用抽象构建框架，用实现扩展细节。

### 1.2 优点：
提高软件系统的可复用性及可维护性。

## 二、依赖倒置原则（Dependence Inversion Principle，DIP）
### 2.1 定义：
高层模块不应该依赖低层模块，二者都应该依赖其抽象。抽象不应该依赖细节，细节应该依赖抽象。针对接口编程，不要针对实现编程。

### 2.2 优点：
可以减少类间的耦合性、提高系统稳定性，提高代码可读性和可维护性，可降低修改程序所造成的风险。

## 三、单一职责原则（Simple Responsibility Principle，SRP）
### 3.1 定义：
不要存在多于一个导致类变更的原因。一个类、接口、方法只负责一项职责。

### 3.2 优点：
降低类的复杂度。提高类的可读性。提高系统的可维护性。降低变更引起的风险。

## 四、接口隔离原则（Interface Segregation Principle，ISP）
### 4.1 定义：
用多个专门的接口，而不是使用单一的总接口，客户端不应该依赖它不需要的接口。

### 4.2 注意：
一个类对应一个类的依赖应该建立在最小的接口上。建立单一接口，不要建立庞大臃肿的解耦。尽量细化接口，接口中的方法尽量少。注意适度原则，一定要适度。

## 五、迪米特法则（Law of Demeter，LoD）
### 5.1 定义：
一个对象应该对其他对象保持最少的了解，又叫最少知道原则，尽量降低类与类之间的耦合。

### 5.2 优点：
降低类之间的耦合。

## 六、里氏替换原则（Liskov Substitution Principle，LSP）
### 6.1 定义：
如果对每一个类型为T1的对象o1，都有类型为T2的对象o2，使得以T1定义的所有程序P在所有的对象o1都替换成o2时，程序P的行为没有发生变化，那么类型T2是类型T1的子类型。

### 6.2 定义扩展：
一个软件实体如果适用一个父类的话，那一定适用于其子类，所有引用父类的地方必须能透明地使用其子类的对象，子类对象能够替换父类对象，而程序逻辑不变。

### 6.3 引申意义：
子类可以扩展父类的功能，但不能改变父类原有的功能。

- 含义1：子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法。
- 含义2：子类中可以增加自己特有的方法。
- 含义3：当子类的方法重载父类的方法时，方法的前置条件（即方法的输入、入参）要比父类方法的输入参数更宽松。
- 含义4：当子类的方法实现父类的方法时（重写、重载或实现抽象方法），方法的后置条件（即方法的输出、返回值）要比父类更严格或相等。

### 6.4 优点：
约束继承泛滥，开闭原则的一种体现。加强程序的健壮性，同时变更时也可以做到非常好的兼容性。提高程序的维护性、扩展性，降低需求变更时引入的风险。

## 七、合成（组合）、聚合复用原则（Composite/Aggregate Reuse Principle，CARP）
### 7.1 定义：
尽量使用对象组合、聚合，而不是继承关系达到软件复用的目的。聚合has-a和组合contains-a。

### 7.2 优点：
可以使系统更加灵活，降低类与类之间的耦合度，一个类的变化对其他类造成的影响相对较少。

## 八、一句话归纳七大设计原则

| 设计原则             | 一句话归纳                                           | 目的                                       |
| :------------------- | :--------------------------------------------------- | :----------------------------------------- |
| 开闭原则（OCP）      | 对扩展开放，对修改关闭                               | 减少维护带来新的风险                       |
| 依赖倒置原则（DIP）  | 高层不应该依赖底层，尽可能的依赖抽象                 | 更利于代码结构的升级扩展                   |
| 单一职责原则（SRP）  | 一个类只干一件事                                     | 便于理解，提高代码可读性                   |
| 接口隔离原则（ISP）  | 一个接口只干一件事                                   | 功能解耦，高聚合、低耦合                   |
| 迪米特法则（LoD）    | 不该知道的不要知道                                   | 只和朋友交流，不和陌生人说话，减少代码臃肿 |
| 里氏替换原则（LSP）  | 子类重写方法的功能发生改变，不应该影响父类方法的含义 | 防止继承泛滥                               |
| 合成复用原则（CARP） | 尽量使用组合实现代码复用，而不使用继承               | 降低代码耦合                               |



