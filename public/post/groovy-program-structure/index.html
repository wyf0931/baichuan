<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Groovy 程序结构 | Mehameha</title>
    <meta property="og:title" content="Groovy 程序结构 - Mehameha">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2019-06-27T19:15:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2019-06-27T19:15:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Groovy 程序结构">
        <meta name="author" content="Scott">
        
    <meta property="og:url" content="/post/groovy-program-structure/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    


    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="">
                        Mehameha
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="">首页</a>
                    
                    <a  href="/archives/" title="归档">归档</a>
                    
                    <a  href="/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Groovy 程序结构</h1>
        </header>
        <date class="post-meta meta-date">
            2019年6月27日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>本章主要讲 Groovy 编程语言的程序结构。</p>
<h3 id="包package">包（package）</h3>
<p>包名称与 Java 中的角色完全相同。它们允许我们在没有任何冲突的情况下分离代码库。Groovy 类必须在类定义之前指定它们的包，否则假定使用默认包。
包的定义与 Java 非常相似：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// defining a package named com.yoursite
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#111">com</span><span style="color:#f92672">.</span><span style="color:#75af00">yoursite</span>
</code></pre></div><p>要在 <code>com.yoursite.com</code> 包中引用某个类 <code>Foo</code>，您需要使用全路径<code>com.yoursite.com.Foo</code>，或者您可以使用 <code>import</code> 语句，如下所示。</p>
<h3 id="导入import">导入（import）</h3>
<p>为了引用某个类，你得先引入它所在的包。Groovy 效仿 Java 的方式用 <code>import</code> 语句来解析类引用的概念。
例如，Groovy 提供了几个构造类，例如<code>MarkupBuilder</code>。 <code>MarkupBuilder</code>在<code>groovy.xml</code> 包中，所以为了使用这个类，你需要导入它，如下所示：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// importing the class MarkupBuilder
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> <span style="color:#111">groovy.xml.MarkupBuilder</span>

<span style="color:#75715e">// using the imported class to create an object
</span><span style="color:#75715e"></span><span style="color:#00a8c8">def</span> <span style="color:#111">xml</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">MarkupBuilder</span><span style="color:#f92672">()</span>

<span style="color:#00a8c8">assert</span> <span style="color:#111">xml</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>
</code></pre></div><h3 id="默认导入">默认导入</h3>
<p>默认导入是 Groovy 语言默认提供的导入。例如，请查看以下代码：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#00a8c8">new</span> <span style="color:#75af00">Date</span><span style="color:#f92672">()</span>
</code></pre></div><p>Java 中的相同代码需要一个 <code>Date</code> 类的 import 语句，如下所示：<code>import java.util.Date</code>。默认情况下，Groovy 会为您导入这些类：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">java.lang.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.util.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.io.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.net.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">groovy.lang.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">groovy.util.*</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.math.BigInteger</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.math.BigDecimal</span>
</code></pre></div><p>这样做是因为经常使用这些包中的类。通过导入这些样板代码来简化代码。</p>
<h3 id="简单导入">简单导入</h3>
<p>一个简单的导入是一个 import 语句，您可以在其中完全定义类名和包。例如，下面代码中的 import 语句 <code>import groovy.xml.MarkupBuilder</code> 是一个简单的导入，它直接引用包内的类。</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// importing the class MarkupBuilder
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> <span style="color:#111">groovy.xml.MarkupBuilder</span>

<span style="color:#75715e">// using the imported class to create an object
</span><span style="color:#75715e"></span><span style="color:#00a8c8">def</span> <span style="color:#111">xml</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">MarkupBuilder</span><span style="color:#f92672">()</span>

<span style="color:#00a8c8">assert</span> <span style="color:#111">xml</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>
</code></pre></div><h3 id="全部导入">全部导入（<code>*</code>）</h3>
<p>与Java一样，Groovy提供了一种使用 <code>*</code>（即所谓的星型导入）从包导入所有类的特殊方法。 <code>MarkupBuilder</code> 是一个在<code>groovy.xml</code>包中的类，以及另一个名为<code>StreamingMarkupBuilder</code>的类。 如果您需要使用这两个类，您可以：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">groovy.xml.MarkupBuilder</span>
<span style="color:#f92672">import</span> <span style="color:#111">groovy.xml.StreamingMarkupBuilder</span>

<span style="color:#00a8c8">def</span> <span style="color:#111">markupBuilder</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">MarkupBuilder</span><span style="color:#f92672">()</span>

<span style="color:#00a8c8">assert</span> <span style="color:#111">markupBuilder</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>

<span style="color:#00a8c8">assert</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">StreamingMarkupBuilder</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>
</code></pre></div><p>这是完全有效的代码。但是使用 <code>*</code> 导入，我们只用一行即可达到同样的效果。星号导入包 <code>groovy.xml</code> 下的所有类：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">groovy.xml.*</span>

<span style="color:#00a8c8">def</span> <span style="color:#111">markupBuilder</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">MarkupBuilder</span><span style="color:#f92672">()</span>

<span style="color:#00a8c8">assert</span> <span style="color:#111">markupBuilder</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>

<span style="color:#00a8c8">assert</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">StreamingMarkupBuilder</span><span style="color:#f92672">()</span> <span style="color:#f92672">!=</span> <span style="color:#00a8c8">null</span>
</code></pre></div><p><code>*</code> 导入的一个问题是它们可能会混乱您的本地命名空间。但是由于 Groovy 提供了各种别名，这很容易解决。</p>
<h3 id="静态导入static">静态导入（static）</h3>
<p>Groovy 的静态导入功能允许您引用导入的类，就像它们是您自己的类中的静态方法一样：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">static</span> <span style="color:#111">Boolean</span><span style="color:#f92672">.</span><span style="color:#75af00">FALSE</span>

<span style="color:#00a8c8">assert</span> <span style="color:#f92672">!</span><span style="color:#111">FALSE</span> <span style="color:#75715e">// 直接使用，无需 Boolean 前缀！
</span></code></pre></div><p>这类似于 Java 的静态导入功能，但它比 Java 更具动态性，因为它允许您定义与导入方法同名的方法，只要您有不同的类型：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// 静态导入方法
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> <span style="color:#111">static</span> <span style="color:#111">java</span><span style="color:#f92672">.</span><span style="color:#75af00">lang</span><span style="color:#f92672">.</span><span style="color:#75af00">String</span><span style="color:#f92672">.</span><span style="color:#75af00">format</span> 

<span style="color:#00a8c8">class</span> <span style="color:#75af00">SomeClass</span> <span style="color:#f92672">{</span>

    <span style="color:#75715e">// 与上面静态导入的方法同名的方法声明，但具有不同的参数类型
</span><span style="color:#75715e"></span>    <span style="color:#111">String</span> <span style="color:#75af00">format</span><span style="color:#f92672">(</span><span style="color:#111">Integer</span> <span style="color:#111">i</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> 
        <span style="color:#111">i</span><span style="color:#f92672">.</span><span style="color:#75af00">toString</span><span style="color:#f92672">()</span>
    <span style="color:#f92672">}</span>

    <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">main</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[]</span> <span style="color:#111">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 在 java 中编译错误，但是groovy有效的代码
</span><span style="color:#75715e"></span>        <span style="color:#00a8c8">assert</span> <span style="color:#75af00">format</span><span style="color:#f92672">(</span><span style="color:#d88200">&#39;String&#39;</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#39;String&#39;</span> 
        <span style="color:#00a8c8">assert</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">SomeClass</span><span style="color:#f92672">().</span><span style="color:#75af00">format</span><span style="color:#f92672">(</span><span style="color:#111">Integer</span><span style="color:#f92672">.</span><span style="color:#75af00">valueOf</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">))</span> <span style="color:#f92672">==</span> <span style="color:#d88200">&#39;1&#39;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>如果您具有相同的类型，则导入的类优先。</p>
<h3 id="static-import-aliasing">Static import aliasing</h3>
<p>待翻译</p>
<h3 id="static-star-import">Static star import</h3>
<p>待翻译</p>
<h3 id="导入别名">导入别名</h3>
<p>可以使用 <code>as</code> 关键字指定类型别名，我们可以使用我们选择的名称来引用全路径的类名。
例如我们可以导入 <code>java.sql.Date</code> 作为 <code>SQLDate</code> 并
例如，我们可以将<code>java.sql.Date</code>作为<code>SQLDate</code>导入，并在与<code>java.util.Date</code>相同的文件中使用它，而不必使用全路径名称：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">java.util.Date</span>
<span style="color:#f92672">import</span> <span style="color:#111">java.sql.Date</span> <span style="color:#00a8c8">as</span> <span style="color:#111">SQLDate</span>

<span style="color:#111">Date</span> <span style="color:#111">utilDate</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">Date</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000L</span><span style="color:#f92672">)</span>
<span style="color:#111">SQLDate</span> <span style="color:#111">sqlDate</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#111">SQLDate</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000L</span><span style="color:#f92672">)</span>

<span style="color:#00a8c8">assert</span> <span style="color:#111">utilDate</span> <span style="color:#00a8c8">instanceof</span> <span style="color:#111">java</span><span style="color:#f92672">.</span><span style="color:#75af00">util</span><span style="color:#f92672">.</span><span style="color:#75af00">Date</span>
<span style="color:#00a8c8">assert</span> <span style="color:#111">sqlDate</span> <span style="color:#00a8c8">instanceof</span> <span style="color:#111">java</span><span style="color:#f92672">.</span><span style="color:#75af00">sql</span><span style="color:#f92672">.</span><span style="color:#75af00">Date</span>
</code></pre></div><h3 id="脚本与类">脚本与类</h3>
<p><strong>public static void main 与脚本对比</strong></p>
<p>Groovy 支持脚本和类。如下所示：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// 定义一个Main类，名字可以随意
</span><span style="color:#75715e"></span><span style="color:#00a8c8">class</span> <span style="color:#75af00">Main</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// public static void main(String[]) 作为类的 main 方法
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">main</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">...</span> <span style="color:#111">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">println</span> <span style="color:#d88200">&#39;Groovy world!&#39;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>这是您可以从Java中找到的典型代码，其中代码必须嵌入到可执行的类中。 Groovy使它更容易，以下代码是等效的：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#111">println</span> <span style="color:#d88200">&#39;Groovy world!&#39;</span>
</code></pre></div><p>脚本可以被视为一个类而不需要声明它，但有一些差异。</p>
<h3 id="脚本类">脚本类</h3>
<p><a href="http://docs.groovy-lang.org/2.5.4/html/gapi/index.html?groovy/lang/Script.html">脚本</a>会被编译为类。Groovy 编译器会把脚本体中的代码复制到 <code>run</code> 方法中。因此，前面的示例被编译为如下所示：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">org.codehaus.groovy.runtime.InvokerHelper</span>
<span style="color:#75715e">// Main 类继承 groovy.lang.Script 类
</span><span style="color:#75715e"></span><span style="color:#00a8c8">class</span> <span style="color:#75af00">Main</span> <span style="color:#00a8c8">extends</span> <span style="color:#111">Script</span> <span style="color:#f92672">{</span> 
    <span style="color:#75715e">// groovy.lang.Script 需要一个 run 方法来返回值
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">def</span> <span style="color:#75af00">run</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 脚本体会放在 run 方法内
</span><span style="color:#75715e"></span>        <span style="color:#111">println</span> <span style="color:#d88200">&#39;Groovy world!&#39;</span>                 
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// main 方法会自动生成
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">main</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[]</span> <span style="color:#111">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 并在run方法上委托执行脚本
</span><span style="color:#75715e"></span>        <span style="color:#111">InvokerHelper</span><span style="color:#f92672">.</span><span style="color:#75af00">runScript</span><span style="color:#f92672">(</span><span style="color:#111">Main</span><span style="color:#f92672">,</span> <span style="color:#111">args</span><span style="color:#f92672">)</span>     
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>如果脚本位于文件中，则使用该文件的基本名称来确定生成的脚本类的名称。在此示例中，如果文件的名称为 <code>Main.groovy</code>，则脚本类将为 <code>Main</code>。</p>
<h3 id="方法">方法</h3>
<p>如下所示，在脚本中定义一个方法：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#00a8c8">int</span> <span style="color:#75af00">fib</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#111">n</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">?</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">:</span> <span style="color:#111">fib</span><span style="color:#f92672">(</span><span style="color:#111">n</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#111">fib</span><span style="color:#f92672">(</span><span style="color:#111">n</span><span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">)</span>
<span style="color:#f92672">}</span>
<span style="color:#00a8c8">assert</span> <span style="color:#75af00">fib</span><span style="color:#f92672">(</span><span style="color:#ae81ff">10</span><span style="color:#f92672">)==</span><span style="color:#ae81ff">89</span>
</code></pre></div><p>您还可以混合方法和代码。生成的脚本类将所有方法都包含在脚本类中，并将所有脚本体组装到<code>run</code>方法中：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#75715e">// 开始写脚本
</span><span style="color:#75715e"></span><span style="color:#111">println</span> <span style="color:#d88200">&#39;Hello&#39;</span>                                 

<span style="color:#75715e">// 在脚本中定义方法
</span><span style="color:#75715e"></span><span style="color:#00a8c8">int</span> <span style="color:#75af00">power</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span><span style="color:#111">n</span> <span style="color:#f92672">}</span>                       
<span style="color:#75715e">// 继续写脚本
</span><span style="color:#75715e"></span><span style="color:#111">println</span> <span style="color:#d88200">&#34;2^6==${power(6)}&#34;</span>   
</code></pre></div><p>上述代码在内部会被转换为：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#f92672">import</span> <span style="color:#111">org.codehaus.groovy.runtime.InvokerHelper</span>
<span style="color:#00a8c8">class</span> <span style="color:#75af00">Main</span> <span style="color:#00a8c8">extends</span> <span style="color:#111">Script</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// 将power方法原样复制到生成的脚本类中
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">int</span> <span style="color:#75af00">power</span><span style="color:#f92672">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">n</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">**</span> <span style="color:#111">n</span><span style="color:#f92672">}</span>                   
    <span style="color:#00a8c8">def</span> <span style="color:#75af00">run</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 第一、第二句被复制到了 run 方法中
</span><span style="color:#75715e"></span>        <span style="color:#111">println</span> <span style="color:#d88200">&#39;Hello&#39;</span>                         
        <span style="color:#111">println</span> <span style="color:#d88200">&#34;2^6==${power(6)}&#34;</span>              
    <span style="color:#f92672">}</span>
    <span style="color:#00a8c8">static</span> <span style="color:#00a8c8">void</span> <span style="color:#75af00">main</span><span style="color:#f92672">(</span><span style="color:#111">String</span><span style="color:#f92672">[]</span> <span style="color:#111">args</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#111">InvokerHelper</span><span style="color:#f92672">.</span><span style="color:#75af00">runScript</span><span style="color:#f92672">(</span><span style="color:#111">Main</span><span style="color:#f92672">,</span> <span style="color:#111">args</span><span style="color:#f92672">)</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>即使 Groovy 从您的脚本创建了一个类，它对用户来说也是完全透明的。尤其是，脚本被编译为字节码，并保留行号。这意味着如果在脚本中抛出异常，堆栈跟踪将显示与原始脚本对应的行号，而不是显示我们生成的代号。</p>
<h3 id="变量">变量</h3>
<p>脚本中的变量不需要类型定义。这意味着这个脚本：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#00a8c8">int</span> <span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
<span style="color:#00a8c8">int</span> <span style="color:#111">y</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
<span style="color:#00a8c8">assert</span> <span style="color:#111">x</span><span style="color:#f92672">+</span><span style="color:#111">y</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</code></pre></div><p>与以下代码等效：</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy"><span style="color:#111">x</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
<span style="color:#111">y</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
<span style="color:#00a8c8">assert</span> <span style="color:#111">x</span><span style="color:#f92672">+</span><span style="color:#111">y</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>
</code></pre></div><p>但是两者之间存在语义差异：</p>
<ul>
<li>如果变量在第一个示例中声明，则它是局部变量。 它将在<code>run</code>方法中声明，编译器将生成并且在脚本主体外部不可见。 特别是，这样的变量在脚本的其他方法中是不可见的。</li>
<li>如果变量未声明，则进入<a href="http://docs.groovy-lang.org/2.5.4/html/gapi/index.html?groovy/lang/Script.html#getBinding()">脚本绑定</a>。 从方法中可以看到绑定，如果您使用脚本与应用程序交互并需要在脚本和应用程序之间共享数据，那么绑定尤为重要。 读者可参阅<a href="http://docs.groovy-lang.org/latest/html/documentation/guide-integrating.html#_integrating_groovy_in_a_java_application">集成指南</a>获取更多信息。</li>
</ul>
<p>如果您希望变量成为类的字段而不进入<code>Binding</code>，则可以使用<a href="http://docs.groovy-lang.org/latest/html/documentation/core-metaprogramming.html#xform-Field"><code>@Field</code>注解</a>。</p>
<blockquote>
<p>原文地址：http://groovy-lang.org/structure.html</p>
</blockquote>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="">Scott</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="/post/groovy-program-structure/">/post/groovy-program-structure/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/groovy'>groovy</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="/post/quanxue/" title="劝学">劝学</a>
    </li>
    
    <li>
        <a href="/post/git-branch/" title="Git 分支管理">Git 分支管理</a>
    </li>
    
    <li>
        <a href="/post/tail-latency/" title="高并发系统中的尾延迟">高并发系统中的尾延迟</a>
    </li>
    
    <li>
        <a href="/post/inotify/" title="Linux Inotify 机制简介">Linux Inotify 机制简介</a>
    </li>
    
    <li>
        <a href="/post/numpy-excrise-numpy/" title="101 个 NumPy 数据分析练习（1～20）">101 个 NumPy 数据分析练习（1～20）</a>
    </li>
    
    <li>
        <a href="/post/maven-deploy-plugin/" title="Maven Deploy Plugin 使用方法">Maven Deploy Plugin 使用方法</a>
    </li>
    
    <li>
        <a href="/post/intellij-google-code-style-config/" title="Intellij IDEA 配置 Google Code Style">Intellij IDEA 配置 Google Code Style</a>
    </li>
    
    <li>
        <a href="/post/mysql-innodb-transaction/" title="MySQL 事务处理简介">MySQL 事务处理简介</a>
    </li>
    
    <li>
        <a href="/post/java-basic-wiki/" title="Java 基础知识总结">Java 基础知识总结</a>
    </li>
    
    <li>
        <a href="/post/microservice-manage/" title="微服务架构体系治理">微服务架构体系治理</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="/tags/AMQP/">AMQP</a>
    
    <a href="/tags/HTML/">HTML</a>
    
    <a href="/tags/InfluxDB/">InfluxDB</a>
    
    <a href="/tags/InnoDB/">InnoDB</a>
    
    <a href="/tags/JMX/">JMX</a>
    
    <a href="/tags/JVM/">JVM</a>
    
    <a href="/tags/Java/">Java</a>
    
    <a href="/tags/Linux/">Linux</a>
    
    <a href="/tags/Lock/">Lock</a>
    
    <a href="/tags/Maven/">Maven</a>
    
    <a href="/tags/MySQL/">MySQL</a>
    
    <a href="/tags/Numpy/">Numpy</a>
    
    <a href="/tags/OpenCV/">OpenCV</a>
    
    <a href="/tags/Python/">Python</a>
    
    <a href="/tags/data/">data</a>
    
    <a href="/tags/dubbo/">dubbo</a>
    
    <a href="/tags/git/">git</a>
    
    <a href="/tags/groovy/">groovy</a>
    
    <a href="/tags/Java/">Java</a>
    
    <a href="/tags/scikit-learn/">scikit-learn</a>
    
    <a href="/tags/servlet/">servlet</a>
    
    <a href="/tags/spring/">spring</a>
    
    <a href="/tags/ubuntu/">ubuntu</a>
    
    <a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算</a>
    
    <a href="/tags/%E5%8D%8F%E8%AE%AE/">协议</a>
    
    <a href="/tags/%E5%B7%A5%E5%85%B7/">工具</a>
    
    <a href="/tags/%E6%96%87%E5%8F%B2/">文史</a>
    
    <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    
    <a href="/tags/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a>
    
    <a href="/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a>
    
    <a href="/tags/%E7%AE%97%E6%B3%95/">算法</a>
    
    <a href="/tags/%E7%AE%A1%E7%90%86/">管理</a>
    
    <a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a>
    
    <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/">高并发</a>
    
    <a href="/tags/%E9%AC%BC%E8%B0%B7%E5%AD%90/">鬼谷子</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2020 <a href="">Mehameha By Scott</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank">Theme</a> based on <a href="https://github.com/flysnow-org/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
</footer>


    <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.2.8/raphael.min.js" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/flowchart/1.12.2/flowchart.min.js" crossorigin="anonymous"></script>
        <script>(function () {
                if (!window.flowchart) return;
                const blocks = document.querySelectorAll('pre code.language-flowchart, pre code.language-flow');
                for (let i = 0; i < blocks.length; i++) {
                    const block = blocks[i];
                    const rootElement = block.parentNode;
                    const container = document.createElement('div');
                    const id = `js-flowchart-diagrams-${i}`;
                    container.id = id;
                    container.className = 'align-center';
                    container.setAttribute("style", "overFlow-x:auto");
                    rootElement.parentNode.replaceChild(container, rootElement);
                    const diagram = flowchart.parse(block.childNodes[0].nodeValue);
                    diagram.drawSVG(id, window.flowchartDiagramsOptions ? window.flowchartDiagramsOptions : {});
                }
            })();
        </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/webfont/1.6.28/webfontloader.js" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js" crossorigin="anonymous"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js" crossorigin="anonymous"></script>
        <script>(function () {
            if (!window.Diagram) return;
            const blocks = document.querySelectorAll('pre code.language-sequence');
            for (let i = 0; i < blocks.length; i++) {
                const block = blocks[i];
                
                const rootElement = block.parentNode;
                const container = document.createElement('div');
                const id = `js-sequence-diag-${i}`;
                container.id = id;
                container.className = 'align-center';
                container.setAttribute("style", "overFlow-x:auto");
                rootElement.parentNode.replaceChild(container, rootElement);

                const diagram = Diagram.parse(block.childNodes[0].nodeValue);
                diagram.drawSVG(id, window.sequenceDiagramsOptions
                    ? window.sequenceDiagramsOptions
                    : { theme: 'simple' });
            }
        })();
        </script><script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




</body>

</html>